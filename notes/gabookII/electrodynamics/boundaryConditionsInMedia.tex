%
% Copyright © 2016 Peeter Joot.  All Rights Reserved.
% Licenced as described in the file LICENSE under the root directory of this GIT repository.
%
%{
%\input{../blogpost.tex}
%\renewcommand{\basename}{boundaryConditionsInMedia}
%\renewcommand{\dirname}{notes/phy1520/}
%%\newcommand{\dateintitle}{}
%%\newcommand{\keywords}{}
%
%\input{../peeter_prologue_print2.tex}
%
%\usepackage{peeters_layout_exercise}
%\usepackage{peeters_braket}
%\usepackage{peeters_figures}
%\usepackage{siunitx}
%
%\beginArtNoToc
%
%\generatetitle{Maxwell equation boundary conditions in media}
\section{Maxwell equation boundary conditions in media}
%\label{chap:boundaryConditionsInMedia}

Following \citep{balanis1989advanced}, Maxwell's equations in media, including both electric and magnetic sources and currents are

\begin{subequations}
\label{eqn:boundaryConditionsInMedia:20}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:40}
\spacegrad \cross \BE = -\BM - \partial_t \BB
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:60}
\spacegrad \cross \BH = \BJ + \partial_t \BD
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:80}
\spacegrad \cdot \BD = \rho
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:100}
\spacegrad \cdot \BB = \rho_\txtm
\end{dmath}
\end{subequations}

In general, it is not possible to assemble these into a single Geometric Algebra equation unless specific assumptions about the permeabilities are made, but we can still use Geometric Algebra to examine the boundary condition question.  First, these equations can be expressed in a more natural multivector form

\begin{subequations}
\label{eqn:boundaryConditionsInMedia:120}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:140}
\spacegrad \wedge \BE = -I \lr{ \BM + \partial_t \BB }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:160}
\spacegrad \wedge \BH = I \lr{ \BJ + \partial_t \BD }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:180}
\spacegrad \cdot \BD = \rho
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:200}
\spacegrad \cdot \BB = \rho_\txtm
\end{dmath}
\end{subequations}

Then duality relations can be used on the divergences to write all four equations in their curl form

\begin{subequations}
\label{eqn:boundaryConditionsInMedia:220}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:240}
\spacegrad \wedge \BE = -I \lr{ \BM + \partial_t \BB }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:260}
\spacegrad \wedge \BH = I \lr{ \BJ + \partial_t \BD }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:280}
\spacegrad \wedge (I\BD) = \rho I
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:300}
\spacegrad \wedge (I\BB) = \rho_\txtm I.
\end{dmath}
\end{subequations}

Now it is possible to employ Stokes theorem to each of these.  The usual procedure is to both use the loops of
\cref{fig:boundaryConditionsPillBox:boundaryConditionsPillBoxFig2}
and the pillbox of
\cref{fig:boundaryConditionsTwoSurfaces:boundaryConditionsTwoSurfacesFig1}
, where in both cases the height is made infinitesimal.

% FIXME:remove all but the references when merging this into the gabookII.
%\imageFigure{../../figures/gabook/boundaryConditionsPillBoxFig2}{Two surfaces normal to the interface.}{fig:boundaryConditionsPillBox:boundaryConditionsPillBoxFig2}{0.2}
%\imageFigure{../../figures/gabook/boundaryConditionsTwoSurfacesFig1}{A pillbox volume encompassing the interface.}{fig:boundaryConditionsTwoSurfaces:boundaryConditionsTwoSurfacesFig1}{0.2}

With all these relations expressed in curl form as above, we can use just the pillbox configuration to evaluate the Stokes integrals.  
Let the height \( h \) be measured along the normal axis, and assume that all the charges and currents are localized to the surface

\begin{dmath}\label{eqn:boundaryConditionsInMedia:320}
\begin{aligned}
\BM &= \BM_\txts \delta( h ) \\
\BJ &= \BJ_\txts \delta( h ) \\
\rho &= \rho_\txts \delta( h ) \\
\rho_\txtm &= \rho_{\txtm\txts} \delta( h ),
\end{aligned}
\end{dmath}

we can enumerate the Stokes integrals \( \int d^3 \Bx \cdot \lr{ \spacegrad \wedge \BX } = \oint_{\partial V} d^2 \Bx \cdot \BX \).  The three-volume area element will be written as \( d^3 \Bx = d^2 \Bx \wedge \ncap dh \), giving

\begin{subequations}
\label{eqn:boundaryConditionsInMedia:340}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:360}
\oint_{\partial V} d^2 \Bx \cdot \BE = -\int (d^2 \Bx \wedge \ncap) \cdot \lr{ I \BM_\txts + \partial_t I \BB \Delta h}
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:380}
\oint_{\partial V} d^2 \Bx \cdot \BH = \int (d^2 \Bx \wedge \ncap) \cdot \lr{ I \BJ_\txts + \partial_t I \BD \Delta h}
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:400}
\oint_{\partial V} d^2 \Bx \cdot (I\BD) = \int (d^2 \Bx \wedge \ncap) \cdot \lr{ \rho_\txts I }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:420}
\oint_{\partial V} d^2 \Bx \cdot (I\BB) = \int (d^2 \Bx \wedge \ncap) \cdot \lr{ \rho_{\txtm\txts} I }
\end{dmath}
\end{subequations}

In the limit with \( \Delta h \rightarrow 0 \), the LHS integrals are reduced to just the top and bottom surfaces, and the \( \Delta h \) contributions on the RHS are eliminated.  With \( i = I \ncap \), and \( d^2 \Bx = dA\, i \) on the top surface, we are left with

\begin{subequations}
\label{eqn:boundaryConditionsInMedia:440}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:460}
   0 = \int dA \lr{ i \cdot \Delta \BE + I \cdot \lr{ I \BM_\txts } }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:480}
0 = \int dA \lr{ i \cdot \Delta \BH - I \cdot \lr{ I \BJ_\txts } }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:500}
0 = \int dA \lr{ i \cdot \Delta (I\BD) + \rho_\txts }
\end{dmath}
\begin{dmath}\label{eqn:boundaryConditionsInMedia:520}
0 = \int dA \lr{ i \cdot \Delta (I\BB) + \rho_{\txtm\txts} }
\end{dmath}
\end{subequations}

Consider the first integral.  Any component of \( \BE \) that is normal to the plane of the pillbox top (or bottom) has no contribution to the integral, so this constraint is one that effects only the tangential components \( \ncap (\ncap \wedge (\Delta \BE)) \).  Writing out the vector portion of the integrand, we have

\begin{dmath}\label{eqn:boundaryConditionsInMedia:540}
i \cdot \Delta \BE + I \cdot \lr{ I \BM_\txts } 
=
\gpgradeone{ i \Delta \BE + I^2 \BM_\txts } 
=
\gpgradeone{ I \ncap \Delta \BE - \BM_\txts } 
=
\gpgradeone{ I \ncap \ncap (\ncap \wedge \Delta \BE) - \BM_\txts } 
=
\gpgradeone{ I (\ncap \wedge (\Delta \BE)) - \BM_\txts } 
=
\gpgradeone{ -\ncap \cross (\Delta \BE) - \BM_\txts }.
\end{dmath}

The dot product (a scalar) in the two surface charge integrals can also be reduced

\begin{dmath}\label{eqn:boundaryConditionsInMedia:560}
i \cdot \Delta (I\BD)
=
\gpgradezero{ i \Delta (I\BD) }
=
\gpgradezero{ I \ncap \Delta (I\BD) }
=
\gpgradezero{ -\ncap \Delta \BD }
=
-\ncap \cdot \Delta \BD,
\end{dmath}

so the integral equations are satisfied provided

%\begin{dmath}\label{eqn:boundaryConditionsInMedia:580}
\boxedEquation{eqn:boundaryConditionsInMedia:580}{
\begin{aligned}
\ncap \cross (\BE_2 - \BE_1) &= - \BM_\txts \\
\ncap \cross (\BH_2 - \BH_1) &= \BJ_\txts \\
\ncap \cdot (\BD_2 - \BD_1) &= \rho_\txts \\
\ncap \cdot (\BB_2 - \BB_1) &= \rho_{\txtm\txts}.
\end{aligned}
}
%\end{dmath}

The cross products may also be written in a (perhaps more natural) dual form

%\begin{dmath}\label{eqn:boundaryConditionsInMedia:581}
\boxedEquation{eqn:boundaryConditionsInMedia:581}{
\begin{aligned}
\ncap \wedge (\BE_2 - \BE_1) &= - I \BM_\txts \\
\ncap \wedge (\BH_2 - \BH_1) &= I \BJ_\txts \\
\ncap \cdot (\BD_2 - \BD_1) &= \rho_\txts \\
\ncap \cdot (\BB_2 - \BB_1) &= \rho_{\txtm\txts}.
\end{aligned}
}
%\end{dmath}

It is tempting to try to assemble these into a results expressed in terms of a four-vector surface current and composite STA bivector fields like the \( F = \BE + I c \BB \) that we can use for the free space Maxwell's equation.  Dimensionally, we need something with velocity in that mix, but what velocity should be used when the speed of the field propagation in each media is potentially different?

%}
%\EndArticle
