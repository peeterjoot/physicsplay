#! /usr/bin/perl

# This script passes a file to a (hardcoded) macbook hostname,
# and runs pbcopy from there to get the contents into the clipboard.

my $machost = 'sofiamac';
my $file = @ARGV[0];
die "file '$file' does not exist." unless ( -e "$file" );
my $rfile = $file;
$rfile =~ s,.*/,,;

system( qq(ssh ${machost} mkdir -p tmp/.clip && scp $file ${machost}:tmp/.clip/$rfile && ssh ${machost} 'pbcopy < tmp/.clip/$rfile') );
